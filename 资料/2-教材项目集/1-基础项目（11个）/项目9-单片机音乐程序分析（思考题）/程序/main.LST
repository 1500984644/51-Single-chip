C51 COMPILER V9.00   MAIN                                                                  08/20/2017 20:23:50 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: E:\软件\KeilC51\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          //单片机音乐程序分析，针对B105型实验开发板设计
   2          //通过蜂鸣器播放出简单的音乐
   3          //设计：单片机创新工作室--冷恩鑫设计，2015年12月15日
   4          #include <reg52.h>
   5          sbit fmq=P3^7;
   6          unsigned char i,x,y,k,keys,a;
   7          unsigned char code pinlv[]={131,110,98, 87, 73, 87, 110,98, 131,0,110,98, 87, 73, 73,  
   8                                                                  65, 98,87,87,87,73,65,73,65,55,58,65,73,65,87,110,98,87,
   9                                                                  73,110,131,110,98,87,65,73,73,0,87,65,65,73,82,87,98,87,
  10                                                                  73,131,110,98,0,110,98,87,73,65,55,58,65,73,87,65,65,                           
  11                                                                  44,37,33,33,37,33,44,49,44,37,33,33,37,33,44,                           // 康定情歌
  12                                                                  44,37,33,33,37,33,44,49,37,44,49,44,49,55,49, 
  13                                                                  65,37,44,49,55,33,37,44,49,44,49,55,49,65,                              
  14                                                                  74,74,65,74,55,58,74,74,65,74,49,55,74,74,37,                           //生日快乐
  15                                                                  44,55,58,66,41,41,44,55,49,55};    
  16          unsigned int code jiepai[]={110,131,147,494,196,165,131,294,440,1,131,147,
  17                                                  165,588,196,440,294,660,330,165,196,880,588,220,
  18                                                  262,124,110,196,220,330,131,147,495,196,262,220,
  19                                                  131,147,165,220,784,392,2,660,660,220,196,175,330,
  20                                                  588,495,196,110,131,147,2,131,147,330,392,440,524,
  21                                                  247,220,196,165,880,880,                                        
  22                                                  330,392,440,880,784,440,698,586,330,392,440,  
  23                                                  880,392,440,660,330,392,440,880,392,440,330,
  24                                                  586,392,330,586,660,586,524,392,586,392,1320,
  25                                                  586,524,1960,392,330,586,660,586,524,293,880,                                   
  26                                                  146,292,440,392,524,984,146,292,440,392,586,
  27                                                  1048,392,146,784,660,524,492,440,1466,349,660,524,586,1048};            //让我们荡起双桨、68                                                                                    
  28          void delay(unsigned int m)
  29          {
  30   1          unsigned char j;
  31   1              while(m--)
  32   1              {
  33   2                      for(j=0;j<115;j++);
  34   2              }
  35   1      }
  36          void yanzou(unsigned char pinlv,unsigned int jiepai)
  37          {
  38   1              unsigned char pl;
  39   1              unsigned int jp;
  40   1              if(jiepai==1) delay(250);                                                                                                                       //1/2拍暂停，即1/2拍的0
  41   1              else if(jiepai==2) delay(500);                                                                                                          //1拍暂停，即1拍的0
  42   1              else
  43   1          { 
  44   2                      for(jp=0;jp<jiepai;jp++)
  45   2                      {
  46   3                           fmq=0;
  47   3                               for(pl=0;pl<pinlv;pl++);
  48   3                               fmq=1;
  49   3                               for(pl=0;pl<pinlv;pl++);
  50   3                      }
  51   2              }       
  52   1      }  
  53          void timer0_init(void)
  54          {
  55   1              TMOD = 0x01;
C51 COMPILER V9.00   MAIN                                                                  08/20/2017 20:23:50 PAGE 2   

  56   1              TH0 = (65536 - 2000) / 256;
  57   1              TL0 = (65536 - 2000) % 256;
  58   1              EA = 1;
  59   1              ET0 = 1;
  60   1              TR0 = 1;
  61   1      }
  62          void timer0_isr(void)interrupt 1
  63          {
  64   1              TH0 = (65536 - 2000) / 256;
  65   1              TL0 = (65536 - 2000) % 256;
  66   1      }
  67          void main()
  68          {
  69   1              timer0_init();
  70   1              while(1)
  71   1              {       
  72   2                      yanzou(pinlv[x],jiepai[x]);
  73   2                      x++; 
  74   2                      if(x > 138) x = 0;
  75   2              }               
  76   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    161    ----
   CONSTANT SIZE    =    411    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      6    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
